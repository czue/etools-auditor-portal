<!--import [polymer, etools-content-panel, paper-input, tab-inputs-styles, module-styles, get-partner-data,
            common-methods-behavior, static-data-behavior, permission-controller]-->

<dom-module id="partner-details-tab">
    <template>
        <style include="tab-inputs-styles module-styles">
            etools-content-panel {
                margin-bottom: 20px;
            }

            .partner-loading {
                position: absolute;
                right: -32px;
                top: 28px;
                left: auto;
            }

            .partner-loading:not([active]) {
                display: none !important;
            }
        </style>

        <get-partner-data partner="{{partner}}" partner-id="{{partnerId}}"></get-partner-data>

        <etools-content-panel class="content-section clearfix" panel-title="Partner Details" show-expand-btn>
            <div class="row-h group">
                <div class="input-container">
                    <!-- Partner -->
                    <etools-searchable-multiselection-menu
                            options="[[partners]]"
                            class$="[[_setRequired('partner', basePermissionPath)]] [[_setReadonlyClass(requestInProcess, basePermissionPath)]]"
                            readonly="[[isReadOnly('partner', basePermissionPath, requestInProcess)]]"
                            disabled="[[isReadOnly('partner', basePermissionPath)]]"
                            value="{{engagement.partner}}"
                            id="partner"
                            invalid="{{_checkInvalid(errors.partner)}}"
                            error-message="{{errors.partner}}"
                            required="{{_setRequired('partner', basePermissionPath)}}"
                            custom-object-options dynamic-align
                            option-value="id"
                            option-label="name"
                            label="[[getLabel('partner', basePermissionPath)]]"
                            on-focus="_resetFieldError"
                            on-value-change="_requestPartner"
                            placeholder="[[getPlaceholderText('partner', basePermissionPath)]]">
                    </etools-searchable-multiselection-menu>

                    <etools-loading active="{{requestInProcess}}" no-overlay loading-text="" class="partner-loading"></etools-loading>
                </div>

                <div class="input-container">
                    <!-- Partner Address -->
                    <paper-input label="Partner Address"
                                 class="without-border"
                                 disabled readonly
                                 value="[[partner.street_address]]"
                                 placeholder="Empty Field">
                    </paper-input>
                </div>

                <div class="input-container">
                    <!-- Partner City -->
                    <paper-input label="Partner City"
                                 class="without-border"
                                 value="{{partner.city}}"
                                 placeholder="Empty Field"
                                 disabled readonly></paper-input>
                </div>




            </div>

            <div class="row-h group">

                <div class="input-container">
                    <!-- Partner Postal Code -->
                    <paper-input label="Partner Postal Code"
                                 class="without-border"
                                 value="{{partner.postal_code}}"
                                 placeholder="Empty Field"
                                 disabled readonly></paper-input>
                </div>

                <div class="input-container">
                    <!-- Partner Phone Number -->
                    <paper-input label="[[getLabel('partner.phone_number', basePermissionPath)]]"
                                 class="without-border"
                                 value="{{partner.phone_number}}"
                                 placeholder="[[getPlaceholderText('partner.phone_number', basePermissionPath)]]"
                                 disabled readonly></paper-input>
                </div>

                <div class="input-container">
                    <!-- Partner E-mail Address -->
                    <paper-input label="[[getLabel('partner.email', basePermissionPath)]]"
                                 class="without-border"
                                 value="{{partner.email}}"
                                 placeholder="[[getPlaceholderText('partner.email', basePermissionPath)]]"
                                 disabled readonly></paper-input>
                </div>
            </div>

            <div class="row-h group">
                <etools-searchable-multiselection-menu
                        options="[[partner.interventions]]"
                        selected-values="{{activePd}}"
                        update-selected
                        class$="[[_setRequired('active_pd', basePermissionPath)]] [[_setReadonlyClass(requestInProcess, basePermissionPath)]]"
                        readonly="[[isPdReadonly(basePermissionPath, requestInProcess, partner)]]"
                        disabled="[[isPdReadonly(basePermissionPath, requestInProcess, partner)]]"
                        invalid="{{_checkInvalid(errors.active_pd)}}"
                        error-message="{{errors.active_pd}}"
                        on-focus="_resetFieldError"
                        required="{{_setRequired('active_pd', basePermissionPath)}}"
                        dynamic-align
                        multi
                        hide-search
                        custom-object-options
                        option-value="id"
                        option-label="number"
                        label="[[getLabel('active_pd', basePermissionPath)]]"
                        placeholder="[[getPlaceholderText('active_pd', basePermissionPath)]]">
                </etools-searchable-multiselection-menu>
            </div>
        </etools-content-panel>

    </template>

    <!-- inject scripts './partner-details-tab.js'-->
</dom-module>
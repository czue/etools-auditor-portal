<!--import [polymer, etools-content-panel, paper-input, etools-datepicker/etools-datepicker-button]-->
<!--import [tab-inputs-styles, module-styles, date-behavior, custom-validator, permission-controller]-->

<dom-module id="assign-engagement">
    <template>
        <style include="tab-inputs-styles module-styles">
            :host {
                position: relative;
                display: block;
                margin-bottom: 20px;
            }
        </style>

        <etools-content-panel class="content-section clearfx" title="Assign {{auditType}}">
            <div class="row-h group">
                <div class="input-container">
                    <!-- Date of Field Visit -->
                    <paper-input label="Date of Field Visit"
                                 id="dateVisitInput"
                                 class$="disabled-as-readonly [[_isRequired('date_of_field_visit', basePermissionPath)]] validate-date"
                                 disabled$="[[_isReadOnly('date_of_field_visit', 'true', data.date_of_draft_report_to_ip)]]"
                                 value="[[prettyDate(data.date_of_field_visit)]]"
                                 on-down="openDatePicker"
                                 data-selector="dateVisit"
                                 validator="dateValidator"
                                 error-message="A valid Date of Field Visit is required"
                                 required="[[_isRequired('date_of_field_visit', basePermissionPath)]]"
                                 validator="dateValidator"
                                 on-focus="_resetFieldError"
                                 placeholder="&#8212;">
                        <etools-datepicker-button prefix
                                                  id="dateVisit"
                                                  date="[[prepareDate(data.date_of_field_visit)]]"
                                                  format="YYYY-MM-DD"
                                                  pretty-date="{{data.date_of_field_visit}}"
                                                  no-init show-clear-btn>
                        </etools-datepicker-button>
                    </paper-input>
                </div>
                <div class="input-container">
                    <!-- Date of Field Visit -->
                    <paper-input label="Draft Report Issued to IP"
                                 id="draftReportToIpInput"
                                 class$="disabled-as-readonly [[_isRequired('date_of_draft_report_to_ip', basePermissionPath)]] validate-date"
                                 disabled$="[[_isReadOnly('date_of_draft_report_to_ip', data.date_of_field_visit, data.date_of_comments_by_ip)]]"
                                 value="[[prettyDate(data.date_of_draft_report_to_ip)]]"
                                 validator="dateValidator"
                                 error-message="A valid Draft Report Issued to IP is required"
                                 on-down="openDatePicker"
                                 data-selector="draftReportToIp"
                                 validator="dateValidator"
                                 on-focus="_resetFieldError"
                                 required="[[_isRequired('date_of_draft_report_to_ip', basePermissionPath)]]"
                                 placeholder="&#8212;">
                        <etools-datepicker-button prefix
                                                  id="draftReportToIp"
                                                  date="[[prepareDate(data.date_of_draft_report_to_ip)]]"
                                                  format="YYYY-MM-DD"
                                                  pretty-date="{{data.date_of_draft_report_to_ip}}"
                                                  no-init show-clear-btn>
                        </etools-datepicker-button>
                    </paper-input>
                </div>
                <div class="input-container">
                    <!-- Date of Field Visit -->
                    <paper-input label="Comments Received by IP"
                                 id="commentsReceivedByIpInput"
                                 class$="disabled-as-readonly [[_isRequired('date_of_comments_by_ip', basePermissionPath)]] validate-date"
                                 disabled$="[[_isReadOnly('date_of_comments_by_ip', data.date_of_draft_report_to_ip, data.date_of_draft_report_to_unicef)]]"
                                 value="[[prettyDate(data.date_of_comments_by_ip)]]"
                                 validator="dateValidator"
                                 error-message="A valid Date of Comments Received by IP is required"
                                 on-down="openDatePicker"
                                 data-selector="commentsReceivedByIp"
                                 validator="dateValidator"
                                 on-focus="_resetFieldError"
                                 required="[[_isRequired('date_of_comments_by_ip', basePermissionPath)]]"
                                 placeholder="&#8212;">
                        <etools-datepicker-button prefix
                                                  id="commentsReceivedByIp"
                                                  date="[[prepareDate(data.date_of_comments_by_ip)]]"
                                                  format="YYYY-MM-DD"
                                                  pretty-date="{{data.date_of_comments_by_ip}}"
                                                  no-init show-clear-btn>
                        </etools-datepicker-button>
                    </paper-input>
                </div>
            </div>
            <div class="row-h group">
                <div class="input-container">
                    <!-- Date of Field Visit -->
                    <paper-input label="Draft Report Issued to UNICEF"
                                 id="draftReportUnicefInput"
                                 class$="disabled-as-readonly [[_isRequired('date_of_draft_report_to_unicef', basePermissionPath)]] validate-date"
                                 disabled$="[[_isReadOnly('date_of_draft_report_to_unicef', data.date_of_comments_by_ip, data.date_of_comments_by_unicef)]]"
                                 value="[[prettyDate(data.date_of_draft_report_to_unicef)]]"
                                 validator="dateValidator"
                                 error-message="A valid Date of Draft Report Issued to UNICEF is required"
                                 on-down="openDatePicker"
                                 data-selector="draftReportUnicef"
                                 validator="dateValidator"
                                 on-focus="_resetFieldError"
                                 required="[[_isRequired('date_of_draft_report_to_unicef', basePermissionPath)]]"
                                 placeholder="&#8212;">
                        <etools-datepicker-button prefix
                                                  id="draftReportUnicef"
                                                  date="[[prepareDate(data.date_of_draft_report_to_unicef)]]"
                                                  format="YYYY-MM-DD"
                                                  pretty-date="{{data.date_of_draft_report_to_unicef}}"
                                                  no-init show-clear-btn>
                        </etools-datepicker-button>
                    </paper-input>
                </div>
                <div class="input-container">
                    <!-- Date of Field Visit -->
                    <paper-input label="Comments Received by UNICEF"
                                 id="commentsReceivedUnicefInput"
                                 class$="disabled-as-readonly [[_isRequired('date_of_comments_by_unicef', basePermissionPath)]] validate-date"
                                 disabled$="[[_isReadOnly('date_of_comments_by_unicef', data.date_of_draft_report_to_unicef, '')]]"
                                 value="[[prettyDate(data.date_of_comments_by_unicef)]]"
                                 validator="dateValidator"
                                 error-message="A valid Date of Comments Received by UNICEF is required"
                                 on-down="openDatePicker"
                                 data-selector="commentsReceivedUnicef"
                                 validator="dateValidator"
                                 on-focus="_resetFieldError"
                                 required="[[_isRequired('date_of_comments_by_unicef', basePermissionPath)]]"
                                 placeholder="&#8212;">
                        <etools-datepicker-button prefix
                                                  id="commentsReceivedUnicef"
                                                  date="[[prepareDate(data.date_of_comments_by_unicef)]]"
                                                  format="YYYY-MM-DD"
                                                  pretty-date="{{data.date_of_comments_by_unicef}}"
                                                  no-init show-clear-btn>
                        </etools-datepicker-button>
                    </paper-input>
                </div>
            </div>
        </etools-content-panel>
        <custom-validator id="date-validator" validator-name="dateValidator"></custom-validator>
    </template>

    <!-- inject scripts './assign-engagement.js'-->
</dom-module>
<!--import [polymer, lodash, etools-content-panel, paper-input, etools-datepicker]-->
<!--import [tab-inputs-styles, module-styles, date-behavior, custom-validator, permission-controller, common-methods-behavior]-->

<dom-module id="assign-engagement">
    <template>
        <style include="tab-inputs-styles module-styles">
            :host {
                position: relative;
                display: block;
                margin-bottom: 20px;
            }
        </style>

        <etools-content-panel class="content-section clearfx" panel-title="Engagement Status">
            <div class="row-h group">
                <div class="input-container">
                    <!-- Date of Field Visit -->
                    <paper-input
                            label="[[getLabel('date_of_field_visit', basePermissionPath)]]"
                            id="dateVisitInput"
                            class$="disabled-as-readonly [[_setRequired('date_of_field_visit', basePermissionPath)]] validate-date"
                            disabled$="[[_isReadOnly('date_of_field_visit', 'true', falseValue, basePermissionPath)]]"
                            value="[[prettyDate(data.date_of_field_visit)]]"
                            on-down="openDatePicker"
                            data-selector="dateVisit"
                            validator="dateValidator"
                            invalid="{{_checkFieldInvalid(errors.date_of_field_visit)}}"
                            error-message="{{errors.date_of_field_visit}}"
                            required="[[_setRequired('date_of_field_visit', basePermissionPath)]]"
                            validator="dateValidator"
                            on-focus="_resetFieldError"
                            placeholder="&#8212;">
                        <etools-datepicker
                                prefix
                                modal="[[datepickerModal]]"
                                id="dateVisit"
                                date="[[prepareDate(data.date_of_field_visit)]]"
                                format="YYYY-MM-DD"
                                pretty-date="{{data.date_of_field_visit}}"
                                no-init show-clear-btn>
                        </etools-datepicker>
                    </paper-input>
                </div>

                <div class="input-container">
                    <!-- Draft Report Issued to IP -->
                    <paper-input
                            label="[[getLabel('date_of_draft_report_to_ip', basePermissionPath)]]"
                            id="draftReportToIpInput"
                            class$="disabled-as-readonly [[_setRequired('date_of_draft_report_to_ip', basePermissionPath)]] validate-date"
                            disabled$="[[_isReadOnly('date_of_draft_report_to_ip', 'true', data.date_of_comments_by_ip, basePermissionPath)]]"
                            value="[[prettyDate(data.date_of_draft_report_to_ip)]]"
                            validator="dateValidator"
                            invalid="{{_checkFieldInvalid(errors.date_of_draft_report_to_ip)}}"
                            error-message="{{errors.date_of_draft_report_to_ip}}"
                            on-down="openDatePicker"
                            data-selector="draftReportToIp"
                            validator="dateValidator"
                            on-focus="_resetFieldError"
                            required="[[_setRequired('date_of_draft_report_to_ip', basePermissionPath)]]"
                            placeholder="&#8212;">
                        <etools-datepicker
                                prefix
                                modal="[[datepickerModal]]"
                                id="draftReportToIp"
                                date="[[prepareDate(data.date_of_draft_report_to_ip)]]"
                                format="YYYY-MM-DD"
                                pretty-date="{{data.date_of_draft_report_to_ip}}"
                                no-init show-clear-btn
                                max-date="{{maxDate}}">
                        </etools-datepicker>
                    </paper-input>
                </div>

                <div class="input-container">
                    <!-- Comments Received by IP -->
                    <paper-input
                            label="[[getLabel('date_of_comments_by_ip', basePermissionPath)]]"
                            id="commentsReceivedByIpInput"
                            class$="disabled-as-readonly [[_setRequired('date_of_comments_by_ip', basePermissionPath)]] validate-date"
                            disabled$="[[_isReadOnly('date_of_comments_by_ip', data.date_of_draft_report_to_ip, data.date_of_draft_report_to_unicef, basePermissionPath)]]"
                            value="[[prettyDate(data.date_of_comments_by_ip)]]"
                            validator="dateValidator"
                            invalid="{{_checkFieldInvalid(errors.date_of_comments_by_ip)}}"
                            error-message="{{errors.date_of_comments_by_ip}}"
                            on-down="openDatePicker"
                            data-selector="commentsReceivedByIp"
                            validator="dateValidator"
                            on-focus="_resetFieldError"
                            required="[[_setRequired('date_of_comments_by_ip', basePermissionPath)]]"
                            placeholder="&#8212;">
                        <etools-datepicker
                                prefix
                                modal="[[datepickerModal]]"
                                id="commentsReceivedByIp"
                                date="[[prepareDate(data.date_of_comments_by_ip)]]"
                                format="YYYY-MM-DD"
                                pretty-date="{{data.date_of_comments_by_ip}}"
                                no-init show-clear-btn
                                max-date="{{maxDate}}"
                                min-date="{{minDate(data.date_of_draft_report_to_ip)}}">
                        </etools-datepicker>
                    </paper-input>
                </div>
            </div>

            <div class="row-h group">
                <div class="input-container">
                    <!-- Draft Report Issued to UNICEF -->
                    <paper-input
                            label="[[getLabel('date_of_draft_report_to_unicef', basePermissionPath)]]"
                            id="draftReportUnicefInput"
                            class$="disabled-as-readonly [[_setRequired('date_of_draft_report_to_unicef', basePermissionPath)]] validate-date"
                            disabled$="[[_isReadOnly('date_of_draft_report_to_unicef', data.date_of_comments_by_ip, data.date_of_comments_by_unicef, basePermissionPath)]]"
                            value="[[prettyDate(data.date_of_draft_report_to_unicef)]]"
                            validator="dateValidator"
                            invalid="{{_checkFieldInvalid(errors.date_of_draft_report_to_unicef)}}"
                            error-message="{{errors.date_of_draft_report_to_unicef}}"
                            on-down="openDatePicker"
                            data-selector="draftReportUnicef"
                            validator="dateValidator"
                            on-focus="_resetFieldError"
                            required="[[_setRequired('date_of_draft_report_to_unicef', basePermissionPath)]]"
                            placeholder="&#8212;">
                        <etools-datepicker
                                prefix
                                modal="[[datepickerModal]]"
                                id="draftReportUnicef"
                                date="[[prepareDate(data.date_of_draft_report_to_unicef)]]"
                                format="YYYY-MM-DD"
                                pretty-date="{{data.date_of_draft_report_to_unicef}}"
                                no-init show-clear-btn
                                max-date="{{maxDate}}"
                                min-date="{{minDate(data.date_of_comments_by_ip)}}">
                        </etools-datepicker>
                    </paper-input>
                </div>

                <div class="input-container">
                    <!-- Comments Received by UNICEF -->
                    <paper-input
                            label="[[getLabel('date_of_comments_by_unicef', basePermissionPath)]]"
                            id="commentsReceivedUnicefInput"
                            class$="disabled-as-readonly [[_setRequired('date_of_comments_by_unicef', basePermissionPath)]] validate-date"
                            disabled$="[[_isReadOnly('date_of_comments_by_unicef', data.date_of_draft_report_to_unicef, '', basePermissionPath)]]"
                            value="[[prettyDate(data.date_of_comments_by_unicef)]]"
                            validator="dateValidator"
                            invalid="{{_checkFieldInvalid(errors.date_of_comments_by_unicef)}}"
                            error-message="{{errors.date_of_comments_by_unicef}}"
                            on-down="openDatePicker"
                            data-selector="commentsReceivedUnicef"
                            validator="dateValidator"
                            on-focus="_resetFieldError"
                            required="[[_setRequired('date_of_comments_by_unicef', basePermissionPath)]]"
                            placeholder="&#8212;">
                        <etools-datepicker
                                prefix
                                modal="[[datepickerModal]]"
                                id="commentsReceivedUnicef"
                                date="[[prepareDate(data.date_of_comments_by_unicef)]]"
                                format="YYYY-MM-DD"
                                pretty-date="{{data.date_of_comments_by_unicef}}"
                                no-init show-clear-btn
                                max-date="{{maxDate}}"
                                min-date="{{minDate(data.date_of_draft_report_to_unicef)}}">
                        </etools-datepicker>
                    </paper-input>
                </div>
            </div>
        </etools-content-panel>

        <custom-validator id="date-validator" validator-name="dateValidator"></custom-validator>
    </template>

    <!-- inject scripts './assign-engagement.js'-->
</dom-module>

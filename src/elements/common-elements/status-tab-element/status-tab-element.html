<!--import [polymer, iron-icons, iron-icons/av-icons, iron-flex-layout, paper-button,
            etools-content-panel, paper-button, paper-menu-button, paper-icon-button, paper-menu, paper-item, moment-element/moment-import]-->

<dom-module id="status-tab-element">
    <template>
        <!-- inject styles './status-tab-element.scss'-->
        <style include="module-styles"></style>

        <etools-content-panel title="Status">

            <div class="status-list">
                <div class$="status-container [[_getStatusState(1, engagementData)]]">
                    <div class="status-icon">
                    <span class="icon-wrapper">
                        <span class="status-nr">1</span>
                        <iron-icon icon="check"></iron-icon>
                    </span>
                    </div>
                    <div class="status">
                        <span>Partner Contacted</span>
                        <span class="status-date">{{_getFormattedDate('partner_contracted_at', engagementData)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(2, engagementData)]]">
                    <div class="status-icon">
                    <span class="icon-wrapper">
                        <span class="status-nr">2</span>
                        <iron-icon icon="check"></iron-icon>
                    </span>
                    </div>
                    <div class="status">
                        <span>Field Visit</span>
                        <span class="status-date">{{_getFormattedDate('date_of_field_visit', engagementData)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(3, engagementData)]]">
                    <div class="status-icon">
                    <span class="icon-wrapper">
                        <span class="status-nr">3</span>
                        <iron-icon icon="check"></iron-icon>
                    </span>
                    </div>
                    <div class="status multi-line">
                        <span>Draft Report <br> Issued to IP</span>
                        <span class="status-date">{{_getFormattedDate('date_of_draft_report_to_ip', engagementData)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(4, engagementData)]]">
                    <div class="status-icon">
                    <span class="icon-wrapper">
                        <span class="status-nr">4</span>
                        <iron-icon icon="check"></iron-icon>
                    </span>
                    </div>
                    <div class="status multi-line">
                        <span>Comments <br> Received by IP</span>
                        <span class="status-date">{{_getFormattedDate('date_of_comments_by_ip', engagementData)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(5, engagementData)]]">
                    <div class="status-icon">
                    <span class="icon-wrapper">
                        <span class="status-nr">5</span>
                        <iron-icon icon="check"></iron-icon>
                    </span>
                    </div>
                    <div class="status multi-line">
                        <span>Draft Report <br> Issued to UNICEF</span>
                        <span class="status-date">{{_getFormattedDate('date_of_draft_report_to_unicef', engagementData)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(6, engagementData)]]">
                    <div class="status-icon">
                    <span class="icon-wrapper">
                        <span class="status-nr">6</span>
                        <iron-icon icon="check"></iron-icon>
                    </span>
                    </div>
                    <div class="status multi-line">
                        <span>Comments <br> Received by UNICEF</span>
                        <span class="status-date">{{_getFormattedDate('date_of_comments_by_unicef', engagementData)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(7, engagementData)]]">
                    <div class="status-icon">
                    <span class="icon-wrapper">
                        <span class="status-nr">7</span>
                        <iron-icon icon="check"></iron-icon>
                    </span>
                    </div>
                    <div class="status">
                        <span>Final Report</span>
                    </div>
                </div>
            </div>


            <div class="status-buttons">
                <paper-button raised on-tap="_btnClicked" class$="[[_setBtnClass(otherActions)]]">
                    <span>[[mainActionText]]</span>
                    <template is="dom-if" if="{{_showOtherActions(otherActions)}}">

                        <paper-menu-button horizontal-align="right" opened="{{statusBtnMenuOpened}}">
                            <paper-icon-button icon="expand-more" class="dropdown-trigger"></paper-icon-button>
                            <div class="dropdown-content">
                                <div class="other-title">Other Actions</div>

                                <template is="dom-repeat" items="[[otherActions]]">
                                    <div class="other-options" on-click="closeMenu" event-name$="[[item.event]]">{{item.name}}</div>
                                </template>

                            </div>
                        </paper-menu-button>

                    </template>

                </paper-button>
            </div>

        </etools-content-panel>

    </template>

    <!-- inject scripts './status-tab-element.js'-->
</dom-module>
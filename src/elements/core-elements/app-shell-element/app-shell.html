<!--import [polymer, app-route/app-location, app-route, app-layout, paper-icon-button,
             paper-toast, paper-material, iron-selector, iron-pages, iron-collapse, iron-icons, iron-icons/social-icons,
             etools-loading/etools-loading-behavior, iron-icons/av-icons]-->

<!--import [etools-app-config, user-data, countries-data, side-bar-item, countries-dropdown, static-data]-->
<!--import [shared-styles, page-layout-styles, app-theme]-->

<dom-module id="app-shell">

    <template>
        <!-- inject styles './app-shell.scss'-->
        <style include="shared-styles"></style>

        <static-data></static-data>
        <user-data></user-data>

        <app-location route="{{route}}" query-params="{{queryParams}}"></app-location>

        <app-route
                route="{{route}}"
                pattern="[[baseUrl]]:page"
                data="{{routeData}}"
                query-params="{{queryParams}}"
                tail="{{subroute}}"></app-route>

        <etools-loading id="global-loading" absolute></etools-loading>

        <app-drawer-layout id="layout" responsive-width="850px" narrow="{{narrow}}" fullbleed>

            <!-- Drawer content -->
            <app-drawer id="drawer" transition-duration="350">

                <div class="side-nav-wrapper">

                    <app-toolbar class="header">
                        <img id="etools-logo" src$="{{getAbsolutePath('images/etools_logo.svg')}}" alt="etools logo">
                    </app-toolbar>

                    <div class="nav-menu">
                        <iron-selector selected="[[page]]" attr-for-selected="name" selectable="side-bar-item"
                                       role="navigation">

                            <side-bar-item name="engagements" icon="av:playlist-add-check" side-bar-link="engagements/list"></side-bar-item>

                        </iron-selector>
                    </div>

                    <div class="footer">
                        <img id="unicef-logo" src$="{{getAbsolutePath('images/UNICEF_logo.png')}}" alt="UNICEF logo">
                    </div>

                </div>

            </app-drawer>

            <!-- Main content -->

            <iron-pages id="pages"
                        selected="[[page]]"
                        attr-for-selected="name"
                        fallback-selection="not-found"
                        role="main">

                <engagements-page-main name="engagements"
                                       id="engagements"
                                       route="{{subroute}}"
                                       query-params="{{queryParams}}"></engagements-page-main>

                <audits-page-main name="audits"
                                       id="audits"
                                       route="{{subroute}}"
                                       query-params="{{queryParams}}"></audits-page-main>

                <micro-assessments-page-main name="micro-assessments"
                                       id="micro-assessments"
                                       route="{{subroute}}"
                                       query-params="{{queryParams}}"></micro-assessments-page-main>

                <spot-checks-page-main name="spot-checks"
                                  id="spot-checks"
                                  route="{{subroute}}"
                                  query-params="{{queryParams}}"></spot-checks-page-main>

                <not-found-page-view name="not-found" id="not-found"></not-found-page-view>
            </iron-pages>

        </app-drawer-layout>

    </template>

    <!-- inject scripts './app-shell.js'-->

</dom-module>
